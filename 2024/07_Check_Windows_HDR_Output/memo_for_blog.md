# ブログ用のメモ

## はじめに

* Windows 11 で HDRコンテンツを加工させずにモニターへ出力するのは意外と難しい
* 大抵の場合は、アプリケーションが表示の破綻を防ぐためにコンテンツに「変換処理」を適用してしまう
* コンテンツを「消費」するのではなく、コンテンツの「制作」や「解析」を目的とする場合、こうした変換が勝手に働くのは好ましくない
* 本記事ではアプリケーションが行う「変換処理」の内容と、それをキャンセルする方法について述べる

## 目的は以下の2つ

* HDRコンテンツを表示する際にコンテンツに適用される変換処理についてまとめる
* Windows 11 で HDRコンテンツをオリジナルのまま加工せずにモニターへ出力する方法をまとめる

## 結論 


## 詳細

ここから先は結論で述べた内容の詳細を順を追って説明していく。

はじめに、冒頭で述べた「変換処理」の必要性について述べる。次に「変換処理」が行われる具体例を説明する。
続いて Widnows 11 で適用される「変換処理」について述べる。最後に、Widnows 11 で「変換処理」をキャンセルする方法について述べる。

#### HDRコンテンツを表示する際に「変換処理」が必要な理由

* 簡単に言うと モニターの表示スペックが低いからである
* Rec.2100-PQ のスペックを以下に示す。

* 一方で、市販されている民生用のモニターの中に、上記のスペックを完全に満たす製品は存在しない。
* 実際に例を示す。筆者が大変お世話になっている [RTINGS.com](https://www.rtings.com/) の情報を使い、2020年以降に発売した HDR対応モニターのスペックの分布を図AAA、図BBB に示す。

#### 変換処理が行われる具体例

##### 変換処理の具体的な内容

* Gamut Mapping、Tone Mapping が行われる（BT.2390? を参照しながら）

##### 変換処理が適用される場所

* 3パターンある
  * Windows側
  * モニター側
  * 両方（これが一番多い気がする）（10000 nits ターゲットのブルーレイとか再生したら終わるしね）

#### Windows 11 の変換処理の詳細

##### Google Chrome の挙動

* 実例を見せよう

##### Windows 11 がアプリケーションに提供できる情報

* EDID
* MHC Profile の情報


# Tone mapping 関連の用語確認


| 資料名 | Soft Clip | Hard Clip |
|:------|:-------|:-------|
| BT.2390 | Advanced tone mapping | Clipping |
| BT.2408 | soft clip | hard clip|
